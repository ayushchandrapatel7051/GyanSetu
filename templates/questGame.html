<!-- git/GyanSetu/templates/questGame.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GyanSetu â€” Quest Game</title>
    <!-- Playful Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/style.css" />
    <style>
      body {
        background: linear-gradient(135deg, #e0f7fa 0%, #c8e6c9 100%);
        min-height: 100vh;
        font-family: "Fredoka One", "Inter", system-ui, -apple-system,
          "Segoe UI", Roboto, "Helvetica Neue", Arial;
      }
      .quest-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        background: url("../assets/img/quest-bg.png") center center/cover
          no-repeat;
        opacity: 0.18;
        pointer-events: none;
      }
      #game-container,
      .content,
      .app,
      section.page.active {
        background: transparent !important;
        box-shadow: none !important;
        border: none !important;
      }
      .card,
      .panel,
      .cards,
      .card-game {
        background: transparent !important;
        box-shadow: none !important;
        border: none !important;
      }
      .page-title {
        text-shadow: 0 2px 8px #b2bec3;
        letter-spacing: 1px;
        font-family: "Fredoka One", "Inter", system-ui;
      }
      /* Enhanced visuals for Phaser canvas */
      canvas {
        border-radius: 18px;
        box-shadow: 0 4px 24px rgba(39, 174, 96, 0.13);
        background: linear-gradient(120deg, #f5f6fa 60%, #d0f0c0 100%);
      }
      /* Playful font for questions and feedback */
      .quest-dialog,
      .quest-feedback,
      .quest-btn {
        font-family: "Fredoka One", "Inter", system-ui;
      }
      /* Responsive: make buttons and bubbles bigger on mobile */
      @media (max-width: 600px) {
        #game-container .quest-btn {
          font-size: 1.2rem !important;
          padding: 18px 0 !important;
          width: 90vw !important;
        }
        #game-container .quest-dialog {
          font-size: 1.1rem !important;
          padding: 18px !important;
        }
      }
    </style>
    <script src="../js/settings-db.js" defer></script>
    <script src="../js/profile-widget.js" defer></script>
    <!-- Phaser.js for the game -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <!-- Quest Game JS (ported logic) -->
    <script src="../js/questGame.js" defer></script>
    <!-- Background Music -->
    <audio id="bg-music" src="../assets/sfx/bg-music.mp3" loop autoplay></audio>
    <script>
      // Mute/unmute button logic
      window.addEventListener("DOMContentLoaded", function () {
        const music = document.getElementById("bg-music");
        let muted = false;
        // Create mute button
        const muteBtn = document.createElement("button");
        muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
        muteBtn.style.position = "fixed";
        muteBtn.style.bottom = "18px";
        muteBtn.style.left = "18px";
        muteBtn.style.zIndex = "2000";
        muteBtn.style.background = "#222";
        muteBtn.style.color = "#fff";
        muteBtn.style.border = "none";
        muteBtn.style.borderRadius = "50%";
        muteBtn.style.width = "48px";
        muteBtn.style.height = "48px";
        muteBtn.style.fontSize = "1.5rem";
        muteBtn.style.boxShadow = "0 2px 8px #222";
        muteBtn.style.cursor = "pointer";
        muteBtn.onclick = function () {
          muted = !muted;
          music.muted = muted;
          muteBtn.innerHTML = muted
            ? '<i class="fas fa-volume-mute"></i>'
            : '<i class="fas fa-volume-up"></i>';
        };
        document.body.appendChild(muteBtn);
      });
    </script>
  </head>
  <body>
    <div class="quest-bg"></div>
    <div class="app">
      <aside class="sidebar" role="navigation" aria-label="Main navigation">
        <div class="sidebar-inner">
          <h1 class="logo">GyanSetu</h1>
          <nav>
            <ul class="menu">
              <li class="menu-item" data-page="home">
                <i class="fas fa-house"></i
                ><span
                  style="
                    text-decoration: none;
                    color: rgba(255, 255, 255, 0.65);
                  "
                  >Home</span
                >
              </li>
              <li class="menu-item" data-page="lessons">
                <i class="fas fa-book-open"></i><span>Lessons</span>
              </li>
              <li class="menu-item active" data-page="games">
                <i class="fas fa-gamepad"></i><span>Games</span>
              </li>
              <li class="menu-item" data-page="progress">
                <i class="fas fa-chart-simple"></i><span>Progress</span>
              </li>
              <li class="menu-item" data-page="rewards">
                <i class="fas fa-award"></i><span>Rewards</span>
              </li>
              <li class="menu-item" data-page="settings">
                <i class="fas fa-gear"></i><span>Settings</span>
              </li>
            </ul>
          </nav>
          <div class="sidebar-bottom">
            <button class="login" id="loginBtn" style="background: none">
              <i class="fas fa-right-from-bracket"></i><span>Log Out</span>
            </button>
          </div>
        </div>
      </aside>
      <main class="content">
        <section class="page active">
          <h2 class="page-title" style="color: #27ae60">Quest Game</h2>
          <div id="game-container"></div>
          <!-- Modals and overlays will be injected by questGame.js -->
        </section>
      </main>
    </div>
    <script src="../main.js"></script>
    <script src="../js/nav.js"></script>
    <script src="../js/script.js"></script>
  </body>
</html>
